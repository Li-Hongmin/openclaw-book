# â° ç¬¬6ç« ï¼šæŒä¹…åŒ–ä¸å®šæ—¶ä»»åŠ¡

> **æœ¬ç« æ ¸å¿ƒ**ï¼šè®©Agentä»"æŒ‰éœ€å“åº”"è¿›åŒ–ä¸º"ä¸»åŠ¨å®ˆæŠ¤"ï¼Œé€šè¿‡Cronå’ŒHeartbeatæœºåˆ¶å®ç°7Ã—24å°æ—¶çš„è‡ªä¸»è¿è¡Œã€‚

åœ¨å‰é¢çš„ç« èŠ‚ä¸­ï¼Œæˆ‘ä»¬å­¦ä¼šäº†æ„å»ºå•ä¸ªAgentå’Œå¤šAgentå›¢é˜Ÿï¼Œä½†è¿™äº›Agentéƒ½æ˜¯"è¢«åŠ¨å“åº”å‹"çš„â€”â€”ä½ é—®ä¸€å¥ï¼Œå®ƒç­”ä¸€å¥ã€‚çœŸæ­£å¼ºå¤§çš„Agentç³»ç»Ÿåº”è¯¥èƒ½å¤Ÿ**ä¸»åŠ¨å·¥ä½œ**ï¼šåœ¨ä½ ç¡è§‰æ—¶ç›‘æ§æœåŠ¡å™¨ï¼Œåœ¨ä½ é†’æ¥å‰å‡†å¤‡å¥½æ¯æ—¥ç®€æŠ¥ï¼Œåœ¨é—®é¢˜å‘ç”Ÿæ—¶è‡ªåŠ¨ä¿®å¤ã€‚

æœ¬ç« å°†æ·±å…¥æ¢è®¨ä¸¤ç§è®©AgentæŒç»­è¿è¡Œçš„æ ¸å¿ƒæ¨¡å¼ï¼š**Cron Job**ï¼ˆç²¾ç¡®å®šæ—¶æ‰§è¡Œï¼‰å’Œ**Heartbeat**ï¼ˆå®šæœŸæ£€æŸ¥æŒ‰éœ€è¡ŒåŠ¨ï¼‰ï¼Œå¹¶é€šè¿‡ä¸‰ä¸ªå®æˆ˜æ¡ˆä¾‹å±•ç¤ºå¦‚ä½•æ„å»ºçœŸæ­£"æ°¸ä¸åœæ­‡"çš„Agentç³»ç»Ÿã€‚

---

## âš™ï¸ 6.1 Cron + Heartbeatæ¨¡å¼

### 6.1.1 ä¸¤ç§å®šæ—¶æœºåˆ¶çš„æœ¬è´¨åŒºåˆ«

åœ¨ä¼ ç»Ÿçš„è‡ªåŠ¨åŒ–ç³»ç»Ÿä¸­ï¼Œå®šæ—¶ä»»åŠ¡é€šå¸¸åªæœ‰ä¸€ç§é€‰æ‹©ï¼šCronã€‚ä½†åœ¨Agentç³»ç»Ÿä¸­ï¼Œæˆ‘ä»¬éœ€è¦åŒºåˆ†ä¸¤ç§ä¸åŒçš„å®šæ—¶éœ€æ±‚ï¼š

**Cron Jobï¼šç²¾ç¡®çš„ã€é¢„å®šçš„æ‰§è¡Œ**
```bash
# æ¯å¤©æ—©ä¸Š8ç‚¹æ‰§è¡Œ
0 8 * * * run-morning-briefing

# æ¯15åˆ†é’Ÿæ£€æŸ¥ä¸€æ¬¡æœåŠ¡å™¨çŠ¶æ€
*/15 * * * * check-server-health

# æ¯å‘¨ä¸€æ—©ä¸Š9ç‚¹ç”Ÿæˆå‘¨æŠ¥
0 9 * * 1 generate-weekly-report
```

**ç‰¹ç‚¹**ï¼š
- âœ… **ç²¾ç¡®æ—¶é—´è§¦å‘**ï¼šä½ éœ€è¦ä»»åŠ¡åœ¨ç‰¹å®šæ—¶é—´ç‚¹æ‰§è¡Œ
- âœ… **ç‹¬ç«‹ä¼šè¯**ï¼šæ¯æ¬¡æ‰§è¡Œæ˜¯ä¸€ä¸ªæ–°çš„ä¸Šä¸‹æ–‡ï¼Œä¸ä¾èµ–ä¸»ä¼šè¯
- âœ… **å¯é¢„æµ‹æ€§**ï¼šæ—¥å¿—ã€å®¡è®¡ã€è°ƒè¯•éƒ½å¾ˆæ¸…æ™°
- âŒ **ä¸Šä¸‹æ–‡éš”ç¦»**ï¼šæ— æ³•ç›´æ¥è®¿é—®ä¸»Agentçš„å¯¹è¯å†å²

**Heartbeatï¼šå¼¹æ€§çš„ã€æ™ºèƒ½çš„æ£€æŸ¥**
```markdown
# HEARTBEAT.md
æ¯30åˆ†é’Ÿæ£€æŸ¥ä¸€æ¬¡ï¼ˆæ—¶é—´å¯ä»¥æ¼‚ç§»Â±5åˆ†é’Ÿï¼‰ï¼š

1. æ£€æŸ¥é‚®ç®±æ˜¯å¦æœ‰ç´§æ€¥é‚®ä»¶ï¼ˆå¸¦"urgent"æ ‡ç­¾ï¼‰
2. æ£€æŸ¥æ—¥å†æœªæ¥2å°æ—¶å†…æ˜¯å¦æœ‰ä¼šè®®
3. æ£€æŸ¥GitHubæ˜¯å¦æœ‰æ–°çš„PRéœ€è¦å®¡æ ¸
4. æ£€æŸ¥å®¶é‡Œçš„æœåŠ¡å™¨CPUæ˜¯å¦å¼‚å¸¸

å¦‚æœæ‰€æœ‰æ£€æŸ¥éƒ½æ­£å¸¸ï¼Œåªå›å¤"HEARTBEAT_OK"ã€‚
åªåœ¨æœ‰éœ€è¦äººç±»æ³¨æ„çš„äº‹æƒ…æ—¶æ‰ä¸»åŠ¨è¯´è¯ã€‚
```

**ç‰¹ç‚¹**ï¼š
- âœ… **ä¸Šä¸‹æ–‡æ„ŸçŸ¥**ï¼šå¯ä»¥è®¿é—®æœ€è¿‘çš„å¯¹è¯å†å²
- âœ… **æ™ºèƒ½å†³ç­–**ï¼šAgentè‡ªå·±åˆ¤æ–­æ˜¯å¦éœ€è¦è¡ŒåŠ¨
- âœ… **æ‰¹é‡å¤„ç†**ï¼šå¯ä»¥æŠŠå¤šä¸ªæ£€æŸ¥æ”¾åœ¨ä¸€èµ·ï¼Œå‡å°‘APIè°ƒç”¨
- âŒ **æ—¶é—´ä¸ç²¾ç¡®**ï¼šå¯èƒ½ä¼šå»¶è¿Ÿå‡ åˆ†é’Ÿ
- âŒ **ä¸»ä¼šè¯ä¾èµ–**ï¼šéœ€è¦ä¸»Agentä¼šè¯ä¸€ç›´è¿è¡Œ

> ğŸ’¡ **AIè¾…åŠ©æç¤º**
> 
> ä¸ç†Ÿæ‚‰Cronè¯­æ³•ï¼Ÿé—®ChatGPTï¼š
> - "è§£é‡ŠCronè¡¨è¾¾å¼ `*/15 * * * *` çš„å«ä¹‰"
> - "å¦‚ä½•å†™ä¸€ä¸ªæ¯å‘¨äº”ä¸‹åˆ5ç‚¹æ‰§è¡Œçš„Cronè¡¨è¾¾å¼ï¼Ÿ"
> - "Cronè¡¨è¾¾å¼ä¸­ `0 8 * * 1-5` æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ"ï¼ˆå·¥ä½œæ—¥æ—©ä¸Š8ç‚¹ï¼‰

### 6.1.2 å¦‚ä½•é€‰æ‹©ï¼šå†³ç­–æ ‘

```
ä½ çš„ä»»åŠ¡éœ€è¦...

â”œâ”€ ç²¾ç¡®çš„æ—¶é—´ç‚¹ï¼Ÿï¼ˆå¦‚ï¼šæ¯å¤©8ç‚¹æ•´ï¼‰
â”‚  â””â”€ ã€ä½¿ç”¨Cronã€‘
â”‚
â”œâ”€ ä¸æœ€è¿‘å¯¹è¯ç›¸å…³ï¼Ÿï¼ˆå¦‚ï¼šæ ¹æ®åˆšæ‰è®¨è®ºçš„ä»»åŠ¡æé†’æˆ‘ï¼‰
â”‚  â””â”€ ã€ä½¿ç”¨Heartbeatã€‘
â”‚
â”œâ”€ éœ€è¦éš”ç¦»çš„æ‰§è¡Œç¯å¢ƒï¼Ÿï¼ˆå¦‚ï¼šé˜²æ­¢ä¸»ä¼šè¯å†å²æ±¡æŸ“ï¼‰
â”‚  â””â”€ ã€ä½¿ç”¨Cronã€‘
â”‚
â”œâ”€ å¤šä¸ªæ£€æŸ¥å¯ä»¥æ‰¹é‡å¤„ç†ï¼Ÿï¼ˆå¦‚ï¼šé‚®ä»¶+æ—¥å†+å¤©æ°”ï¼‰
â”‚  â””â”€ ã€ä½¿ç”¨Heartbeatã€‘
â”‚
â””â”€ é•¿æœŸè¿è¡Œã€ä¸ç¡®å®šé¢‘ç‡ï¼Ÿï¼ˆå¦‚ï¼šç­‰å¾…æŸä¸ªæ¡ä»¶æ»¡è¶³ï¼‰
   â””â”€ ã€ä½¿ç”¨Heartbeat + æ¡ä»¶åˆ¤æ–­ã€‘
```

#### å¯è§†åŒ–ï¼šCron vs Heartbeat å†³ç­–æµç¨‹

```mermaid
flowchart TD
    Start{ä»»åŠ¡ç‰¹å¾?} --> Q1{éœ€è¦ç²¾ç¡®æ—¶é—´<br/>å¦‚: 8:00æ•´?}
    Q1 -->|æ˜¯| Cron1[âœ… ä½¿ç”¨Cron<br/>é€‚åˆ: å®šæ—¶æŠ¥å‘Š<br/>æ•°æ®å¤‡ä»½]
    Q1 -->|å¦| Q2{ä¾èµ–æœ€è¿‘å¯¹è¯<br/>ä¸Šä¸‹æ–‡?}
    
    Q2 -->|æ˜¯| HB1[âœ… ä½¿ç”¨Heartbeat<br/>é€‚åˆ: æ™ºèƒ½æé†’<br/>ä¸Šä¸‹æ–‡ä»»åŠ¡]
    Q2 -->|å¦| Q3{éœ€è¦éš”ç¦»ç¯å¢ƒ<br/>é¿å…æ±¡æŸ“å†å²?}
    
    Q3 -->|æ˜¯| Cron2[âœ… ä½¿ç”¨Cron<br/>é€‚åˆ: ç‹¬ç«‹ä»»åŠ¡<br/>ç”Ÿäº§éƒ¨ç½²]
    Q3 -->|å¦| Q4{å¤šä¸ªæ£€æŸ¥<br/>å¯æ‰¹é‡?}
    
    Q4 -->|æ˜¯| HB2[âœ… ä½¿ç”¨Heartbeat<br/>é€‚åˆ: ç»¼åˆæ£€æŸ¥<br/>é‚®ä»¶+æ—¥å†+å¤©æ°”]
    Q4 -->|å¦| Q5{é¢‘ç‡ä¸ç¡®å®š<br/>æ¡ä»¶è§¦å‘?}
    
    Q5 -->|æ˜¯| HB3[âœ… ä½¿ç”¨Heartbeat<br/>é€‚åˆ: äº‹ä»¶ç­‰å¾…<br/>çŠ¶æ€ç›‘æ§]
    Q5 -->|å¦| Mixed[ğŸ”€ æ··åˆæ¨¡å¼<br/>Cronæ‰§è¡Œ<br/>Heartbeatç›‘æ§]
    
    style Cron1 fill:#ffcccc,stroke:#333,stroke-width:2px
    style Cron2 fill:#ffcccc,stroke:#333,stroke-width:2px
    style HB1 fill:#ccffcc,stroke:#333,stroke-width:2px
    style HB2 fill:#ccffcc,stroke:#333,stroke-width:2px
    style HB3 fill:#ccffcc,stroke:#333,stroke-width:2px
    style Mixed fill:#ccccff,stroke:#333,stroke-width:2px
```

**å†³ç­–å…³é”®ç‚¹**ï¼š
- ğŸ”´ **Cronä¼˜å…ˆ**ï¼šç²¾ç¡®æ—¶é—´ã€éš”ç¦»ç¯å¢ƒã€å¯é æ‰§è¡Œ
- ğŸŸ¢ **Heartbeatä¼˜å…ˆ**ï¼šä¸Šä¸‹æ–‡æ„ŸçŸ¥ã€æ‰¹é‡æ£€æŸ¥ã€æ¡ä»¶è§¦å‘
- ğŸ”µ **æ··åˆæ¨¡å¼**ï¼šCronå®šæœŸæ‰§è¡Œï¼ŒHeartbeatæ™ºèƒ½ç›‘æ§

### 6.1.3 å®æˆ˜å¯¹æ¯”ï¼šåŒä¸€ä¸ªä»»åŠ¡çš„ä¸¤ç§å®ç°

**åœºæ™¯**ï¼šæ¯å¤©æ—©ä¸Š8ç‚¹å‘é€å¤©æ°”é¢„æŠ¥å’Œæ—¥ç¨‹æé†’

**æ–¹æ¡ˆAï¼šä½¿ç”¨Cron**
```yaml
# cron.yaml
- name: morning-briefing
  schedule: "0 8 * * *"
  command: |
    openclaw run --agent morning-bot --prompt "
      1. æŸ¥è¯¢ä»Šå¤©ä¸œäº¬çš„å¤©æ°”
      2. åˆ—å‡ºä»Šå¤©çš„æ—¥å†äº‹ä»¶
      3. å‘é€æ ¼å¼åŒ–çš„æ™¨æŠ¥åˆ°Telegram
    "
  model: gpt-4o-mini  # ä½¿ç”¨ä¾¿å®œçš„æ¨¡å‹èŠ‚çœæˆæœ¬
```

**ä¼˜ç‚¹**ï¼š
- æ¯å¤©å‡†æ—¶8ç‚¹æ•´æ‰§è¡Œï¼Œä¸ä¼šå»¶è¿Ÿ
- ç‹¬ç«‹æ—¥å¿—ï¼Œå®¹æ˜“è°ƒè¯•
- ä¸å ç”¨ä¸»Agentçš„ä¸Šä¸‹æ–‡

**ç¼ºç‚¹**ï¼š
- æ— æ³•æ ¹æ®æ˜¨æ™šçš„å¯¹è¯å†…å®¹è°ƒæ•´ï¼ˆå¦‚ï¼š"æ˜å¤©æé†’æˆ‘æ—©ç‚¹å‡ºé—¨"ï¼‰
- æ¯æ¬¡éƒ½æ˜¯"å†·å¯åŠ¨"ï¼Œéœ€è¦é‡æ–°è·å–æ‰€æœ‰ä¿¡æ¯

**æ–¹æ¡ˆBï¼šä½¿ç”¨Heartbeat**
```markdown
# HEARTBEAT.md
æ¯å¤©æ—©ä¸Š7:45-8:15ä¹‹é—´æ£€æŸ¥ï¼š

1. å¦‚æœç°åœ¨æ˜¯å·¥ä½œæ—¥ä¸”æ—¶é—´åœ¨7:45-8:15ä¹‹é—´ï¼š
   - è¯»å– memory/morning-checklist.json æŸ¥çœ‹ä»Šå¤©éœ€è¦ç‰¹åˆ«æ³¨æ„çš„äº‹é¡¹
   - æŸ¥è¯¢å¤©æ°”å’Œæ—¥å†
   - å¦‚æœæ˜¨æ™šç”¨æˆ·æåˆ°äº†ç‰¹æ®Šå®‰æ’ï¼ˆæ£€æŸ¥æ˜¨å¤©çš„å¯¹è¯ï¼‰ï¼Œä¼˜å…ˆæé†’
   - å‘é€æ™¨æŠ¥
   - æ›´æ–° morning-checklist.json æ ‡è®°å·²å‘é€

2. å…¶ä»–æ—¶é—´å›å¤ HEARTBEAT_OK
```

**ä¼˜ç‚¹**ï¼š
- å¯ä»¥ç»“åˆæ˜¨æ™šå¯¹è¯ï¼ˆå¦‚ï¼š"è®°å¾—æ˜å¤©æé†’æˆ‘å¸¦ä¼"ï¼‰
- æ—¶é—´çª—å£å¼¹æ€§ï¼Œä¸ä¼šå› ä¸ºå‡ åˆ†é’Ÿå»¶è¿Ÿè€Œé”™è¿‡
- å¯ä»¥åŠ¨æ€è°ƒæ•´å†…å®¹ï¼ˆå¦‚ï¼šä»Šå¤©æ˜¯å‘¨ä¸€ï¼Œè‡ªåŠ¨åŠ ä¸Šå‘¨æŠ¥æ€»ç»“ï¼‰

**ç¼ºç‚¹**ï¼š
- éœ€è¦ä¸»Agentä¼šè¯ä¸€ç›´è¿è¡Œ
- æ—¶é—´ä¸å¤Ÿç²¾ç¡®ï¼ˆå¯èƒ½8:03æ‰å‘ï¼Œä¹Ÿå¯èƒ½8:12ï¼‰
- ä¸Šä¸‹æ–‡ä¼šè¶Šæ¥è¶Šé•¿ï¼Œéœ€è¦å®šæœŸæ¸…ç†

> ğŸ’¡ **AIè¾…åŠ©æç¤º**
> 
> åœ¨å®ç°æ—¶é‡åˆ°é—®é¢˜ï¼Ÿé—®AIï¼š
> - "OpenClawçš„Croné…ç½®æ–‡ä»¶åº”è¯¥æ”¾åœ¨å“ªé‡Œï¼Ÿ"
> - "å¦‚ä½•åœ¨Heartbeatä¸­è¯»å–æ˜¨å¤©çš„å¯¹è¯å†å²ï¼Ÿ"
> - "å¦‚ä½•åœ¨Cronä»»åŠ¡ä¸­å‘é€Telegramæ¶ˆæ¯ï¼Ÿ"

### 6.1.4 æ··åˆä½¿ç”¨ï¼šSelf-healing Serveræ¡ˆä¾‹

æœ€å¼ºå¤§çš„ç³»ç»Ÿå¾€å¾€æ˜¯**åŒæ—¶ä½¿ç”¨Cronå’ŒHeartbeat**ï¼š

**æ¡ˆä¾‹ï¼šå®¶åº­æœåŠ¡å™¨çš„è‡ªæ„ˆç³»ç»Ÿ**

```yaml
# Cron Jobsï¼ˆç²¾ç¡®ã€ç‹¬ç«‹ã€å¯å®¡è®¡ï¼‰

# æ¯15åˆ†é’Ÿï¼šåŸºç¡€å¥åº·æ£€æŸ¥
*/15 * * * * health-check
  - æ£€æŸ¥ç£ç›˜ç©ºé—´ï¼ˆ>90%å‘Šè­¦ï¼‰
  - æ£€æŸ¥å…³é”®æœåŠ¡çŠ¶æ€ï¼ˆDocker, PostgreSQL, Nginxï¼‰
  - è®°å½•æŒ‡æ ‡åˆ° logs/health-YYYY-MM-DD.json

# æ¯å°æ—¶ï¼šä¸»åŠ¨æ¸…ç†
0 * * * * cleanup
  - æ¸…ç† /tmp ä¸‹çš„è¿‡æœŸæ–‡ä»¶
  - æ¸…ç† Docker çš„æ‚¬ç©ºé•œåƒ
  - å‹ç¼©7å¤©å‰çš„æ—¥å¿—æ–‡ä»¶

# æ¯6å°æ—¶ï¼šæ·±åº¦æ£€æŸ¥
0 */6 * * * deep-check
  - æ£€æŸ¥SSLè¯ä¹¦æœ‰æ•ˆæœŸï¼ˆ<30å¤©ç»­ç­¾ï¼‰
  - æ£€æŸ¥åŸŸåDNSè§£ææ˜¯å¦æ­£å¸¸
  - è¿è¡Œå¤‡ä»½å®Œæ•´æ€§æ ¡éªŒ

# æ¯å¤©å‡Œæ™¨3ç‚¹ï¼šè‡ªåŠ¨å¤‡ä»½
0 3 * * * backup
  - å¤‡ä»½æ•°æ®åº“
  - å¤‡ä»½é‡è¦é…ç½®æ–‡ä»¶
  - ä¸Šä¼ åˆ°äº‘å­˜å‚¨ï¼ˆS3, Backblazeï¼‰
  - éªŒè¯å¤‡ä»½å®Œæ•´æ€§
```

```markdown
# HEARTBEAT.mdï¼ˆæ™ºèƒ½å“åº”ï¼‰

æ¯30åˆ†é’Ÿæ£€æŸ¥ï¼š

1. è¯»å–æœ€è¿‘çš„ health-check æ—¥å¿—
2. å¦‚æœå‘ç°å¼‚å¸¸ï¼š
   - ç£ç›˜ç©ºé—´ä¸è¶³ â†’ è‡ªåŠ¨æ‰§è¡Œ cleanupï¼Œç„¶åé€šçŸ¥äººç±»
   - æœåŠ¡å´©æºƒ â†’ å°è¯•é‡å¯ï¼Œè®°å½•æ—¥å¿—ï¼Œå‘é€å‘Šè­¦
   - SSLè¯ä¹¦å¿«è¿‡æœŸ â†’ æå‰15å¤©é€šçŸ¥ï¼ˆCronä¼šåœ¨<30å¤©æ—¶ç»­ç­¾ï¼‰
3. å¦‚æœä¸€åˆ‡æ­£å¸¸ â†’ HEARTBEAT_OK
4. å¦‚æœäººç±»åˆšæ‰æåˆ°äº†æœåŠ¡å™¨ï¼ˆæ£€æŸ¥æœ€è¿‘10æ¡æ¶ˆæ¯ï¼‰â†’ ä¸»åŠ¨æ±‡æŠ¥çŠ¶æ€
```

**ä¸ºä»€ä¹ˆè¿™æ ·è®¾è®¡ï¼Ÿ**

| ä»»åŠ¡ | ä½¿ç”¨ | åŸå›  |
|------|------|------|
| æ¯15åˆ†é’Ÿå¥åº·æ£€æŸ¥ | Cron | éœ€è¦ç²¾ç¡®é¢‘ç‡ï¼Œç‹¬ç«‹æ—¥å¿— |
| æ¯å°æ—¶æ¸…ç† | Cron | é¢„å®šä»»åŠ¡ï¼Œä¸éœ€è¦æ™ºèƒ½åˆ¤æ–­ |
| å¼‚å¸¸å“åº” | Heartbeat | éœ€è¦æ ¹æ®æ—¥å¿—**æ™ºèƒ½åˆ¤æ–­**æ˜¯å¦éœ€è¦äººç±»ä»‹å…¥ |
| ä¸»åŠ¨æ±‡æŠ¥ | Heartbeat | éœ€è¦æ„ŸçŸ¥å¯¹è¯ä¸Šä¸‹æ–‡ï¼ˆ"åˆšæ‰æåˆ°æœåŠ¡å™¨"ï¼‰ |

è¿™å¥—ç³»ç»Ÿåœ¨å®é™…è¿è¡Œä¸­çš„æ•ˆæœï¼š
- ğŸŸ¢ **95%çš„é—®é¢˜è‡ªåŠ¨è§£å†³**ï¼šç£ç›˜æ»¡ã€æœåŠ¡å´©æºƒã€ä¸´æ—¶ç½‘ç»œé—®é¢˜
- ğŸŸ¡ **5%çš„é—®é¢˜æ™ºèƒ½ä¸ŠæŠ¥**ï¼šéœ€è¦äººç±»å†³ç­–çš„ï¼ˆå¦‚ï¼šå¼‚å¸¸æµé‡æ”»å‡»ï¼‰
- ğŸ”µ **0%çš„å™ªéŸ³**ï¼šåªåœ¨çœŸæ­£éœ€è¦æ—¶æ‰è¯´è¯

> ğŸ”§ **é‡åˆ°é”™è¯¯ï¼Ÿ**
> 
> åœ¨é…ç½®Cronæˆ–Heartbeatæ—¶é‡åˆ°é—®é¢˜ï¼ŒæŠŠé”™è¯¯ä¿¡æ¯ç»™AIï¼š
> 
> "æˆ‘é…ç½®äº†ä¸€ä¸ªCronä»»åŠ¡ï¼Œä½†å®ƒæ²¡æœ‰æ‰§è¡Œã€‚æ—¥å¿—æ˜¾ç¤ºï¼š[ç²˜è´´é”™è¯¯]ã€‚æˆ‘åº”è¯¥æ£€æŸ¥ä»€ä¹ˆï¼Ÿ"
> 
> AIä¼šå¸®ä½ æ£€æŸ¥ï¼šCronè¯­æ³•ã€æƒé™é—®é¢˜ã€è·¯å¾„é—®é¢˜ã€ç¯å¢ƒå˜é‡ç­‰ã€‚

---

## ğŸ›ï¸ 6.2 è®¾è®¡æŒç»­è¿è¡Œçš„Agent

### 6.2.1 Heartbeatçš„é»„é‡‘æ³•åˆ™

å¦‚æœä½ è®©Agent**æ¯æ¬¡Heartbeatéƒ½è¾“å‡ºä¸€å †ä¿¡æ¯**ï¼Œå¾ˆå¿«ä½ çš„èŠå¤©ç•Œé¢ä¼šè¢«æ·¹æ²¡ã€‚Heartbeatçš„è‰ºæœ¯åœ¨äº**çŸ¥é“ä½•æ—¶ä¿æŒæ²‰é»˜**ã€‚

**âŒ é”™è¯¯ç¤ºèŒƒï¼šè¯ç—¨Agent**
```markdown
# HEARTBEAT.mdï¼ˆé”™è¯¯ï¼‰
æ¯10åˆ†é’Ÿï¼š
- æŠ¥å‘Šå½“å‰æ—¶é—´
- æŠ¥å‘Šç³»ç»Ÿè´Ÿè½½
- æŠ¥å‘Šä»Šå¤©å·²ç»å·¥ä½œå¤šå°‘æ—¶é—´
- æŠ¥å‘Šé‚®ç®±çŠ¶æ€ï¼ˆæ— è®ºæ˜¯å¦æœ‰æ–°é‚®ä»¶ï¼‰
- æŠ¥å‘Šå¤©æ°”ï¼ˆæ— è®ºæ˜¯å¦éœ€è¦å‡ºé—¨ï¼‰
```

**ç»“æœ**ï¼š24å°æ—¶ Ã— 6æ¬¡/å°æ—¶ = 144æ¡æ¶ˆæ¯ï¼Œå…¨æ˜¯å™ªéŸ³ã€‚

**âœ… æ­£ç¡®ç¤ºèŒƒï¼šå®‰é™çš„å®ˆæŠ¤è€…**
```markdown
# HEARTBEAT.mdï¼ˆæ­£ç¡®ï¼‰
æ¯30åˆ†é’Ÿæ£€æŸ¥ï¼š

ã€ä½•æ—¶è¯´è¯ã€‘ï¼š
1. æœ‰ç´§æ€¥é‚®ä»¶ï¼ˆæ ‡é¢˜åŒ…å« URGENT æˆ–æ¥è‡ªè€æ¿ï¼‰
2. æ—¥å†ï¼šæœªæ¥2å°æ—¶å†…æœ‰ä¼šè®®ï¼Œä¸”æˆ‘è¿˜æ²¡æé†’è¿‡ï¼ˆæ£€æŸ¥ memory/reminders-YYYY-MM-DD.jsonï¼‰
3. æœåŠ¡å™¨ï¼šCPU >80% æŒç»­10åˆ†é’Ÿä»¥ä¸Š
4. ç”¨æˆ·æœ€è¿‘10æ¡æ¶ˆæ¯ä¸­æåˆ°äº†"æé†’æˆ‘"æˆ–"åˆ«å¿˜äº†"

ã€ä½•æ—¶æ²‰é»˜ã€‘ï¼š
- ä¸€åˆ‡æ­£å¸¸ â†’ HEARTBEAT_OK
- å·²ç»æé†’è¿‡çš„äº‹æƒ… â†’ HEARTBEAT_OK
- æ·±å¤œ23:00-7:00ï¼Œé™¤écriticalçº§åˆ«çš„å‘Šè­¦ â†’ HEARTBEAT_OK
```

**å…³é”®æŠ€å·§ï¼šçŠ¶æ€è·Ÿè¸ªæ–‡ä»¶**
```json
// memory/heartbeat-state.json
{
  "lastChecks": {
    "email": 1708405200,
    "calendar": 1708405200,
    "server": 1708405200
  },
  "remindedToday": [
    "meeting-123",
    "task-456"
  ],
  "lastSpoke": 1708405200,
  "silentHoursSince": 3.5
}
```

**é€»è¾‘**ï¼š
```python
# ä¼ªä»£ç 
if urgent_email_exists():
    send_notification()
    update_state()
elif upcoming_meeting_not_reminded():
    send_reminder()
    add_to_remindedToday()
elif server_critical() and not is_night_time():
    send_alert()
elif user_recently_mentioned_reminder():
    check_and_remind()
else:
    return "HEARTBEAT_OK"
```

### 6.2.2 æˆæœ¬ä¼˜åŒ–ï¼šä¸è¦çƒ§å…‰ä½ çš„APIé…é¢

Heartbeatå¦‚æœè®¾è®¡ä¸å½“ï¼Œä¼š**é£é€Ÿæ¶ˆè€—ä½ çš„API tokenså’Œè´¹ç”¨**ã€‚

**æ¡ˆä¾‹ï¼šDaily Briefingçš„æˆæœ¬å¯¹æ¯”**

**âŒ ä½æ•ˆè®¾è®¡**ï¼š
```markdown
# HEARTBEAT.mdï¼ˆä½æ•ˆï¼‰
æ¯30åˆ†é’Ÿï¼š
1. å®Œæ•´è¯»å–ä»Šå¤©çš„æ‰€æœ‰é‚®ä»¶ï¼ˆå¯èƒ½å‡ ç™¾å°ï¼‰
2. å®Œæ•´è¯»å–ä»Šå¤©çš„æ‰€æœ‰æ—¥å†äº‹ä»¶
3. æŠ“å–æ‰€æœ‰RSSæºï¼ˆ50+ä¸ªæºï¼Œæ¯ä¸ª10æ¡æ–‡ç« ï¼‰
4. ç”¨GPT-4æ€»ç»“æ‰€æœ‰å†…å®¹
5. å¦‚æœæ˜¯æ—©ä¸Š8ç‚¹ï¼Œå‘é€ç®€æŠ¥ï¼›å¦åˆ™ä¸¢å¼ƒç»“æœ
```

**æˆæœ¬**ï¼š
- æ¯å¤©48æ¬¡Heartbeat Ã— æ¯æ¬¡20,000 tokens Ã— $0.03/1K tokens = **$28.8/å¤©**
- ä¸€ä¸ªæœˆ = **$864** ğŸ’¸

**âœ… é«˜æ•ˆè®¾è®¡**ï¼š
```markdown
# HEARTBEAT.mdï¼ˆé«˜æ•ˆï¼‰
æ¯30åˆ†é’Ÿï¼š
1. è¯»å– memory/heartbeat-state.json
2. å¦‚æœç°åœ¨æ˜¯7:45-8:15ä¹‹é—´ ä¸” today_briefing_sent = falseï¼š
   - **è§¦å‘Cronä»»åŠ¡**ï¼ˆç”¨ä¾¿å®œçš„æ¨¡å‹ï¼‰æˆ–ç›´æ¥ç”Ÿæˆç®€æŠ¥
   - æ ‡è®° today_briefing_sent = true
3. å¦åˆ™ â†’ HEARTBEAT_OKï¼ˆåªæ¶ˆè€—~100 tokensï¼‰
```

**Cronä»»åŠ¡**ï¼ˆæ¯å¤©8ç‚¹æ‰§è¡Œä¸€æ¬¡ï¼‰ï¼š
```yaml
# cron.yaml
- name: morning-briefing
  schedule: "0 8 * * *"
  model: gpt-4o-mini  # ä½¿ç”¨ä¾¿å®œæ¨¡å‹
  command: |
    1. è¯»å–é‚®ä»¶ï¼ˆè¿‡å»24å°æ—¶ï¼Œåªçœ‹æœªè¯»ï¼‰
    2. è¯»å–æ—¥å†ï¼ˆä»Šå¤©+æ˜å¤©ï¼‰
    3. è¯»å–RSSï¼ˆåªè¦æ–°å¢çš„ï¼Œé€šè¿‡ä¸Šæ¬¡æ£€æŸ¥æ—¶é—´è¿‡æ»¤ï¼‰
    4. æ€»ç»“å¹¶å‘é€åˆ°Telegram
```

**æˆæœ¬**ï¼š
- Heartbeatï¼š48æ¬¡ Ã— 100 tokens Ã— $0.03/1K = **$0.14/å¤©**
- Cronï¼š1æ¬¡ Ã— 5,000 tokens Ã— $0.0005/1K (gpt-4o-mini) = **$0.0025/å¤©**
- æ€»è®¡ï¼š**$0.14/å¤© = $4.2/æœˆ** ğŸ’°ï¼ˆèŠ‚çœäº†98%ï¼ï¼‰

> ğŸ’¡ **AIè¾…åŠ©æç¤º**
> 
> æƒ³ä¼˜åŒ–æˆæœ¬ï¼Ÿé—®AIï¼š
> - "å¦‚ä½•ä¼°ç®—OpenAI APIçš„tokensæ¶ˆè€—ï¼Ÿ"
> - "å“ªäº›ä»»åŠ¡é€‚åˆç”¨gpt-4o-miniè€Œä¸æ˜¯gpt-4ï¼Ÿ"
> - "å¦‚ä½•è®¾è®¡çŠ¶æ€æ–‡ä»¶æ¥é¿å…é‡å¤å¤„ç†ï¼Ÿ"

### 6.2.3 å¯é æ€§ï¼šå¤„ç†å¤±è´¥å’Œé‡è¯•

æŒç»­è¿è¡Œçš„Agentå¿…é¡»èƒ½å¤Ÿ**ä¼˜é›…åœ°å¤„ç†å¤±è´¥**ã€‚

**å¸¸è§å¤±è´¥åœºæ™¯**ï¼š
1. **å¤–éƒ¨APIè¶…æ—¶**ï¼ˆå¤©æ°”APIã€é‚®ä»¶æœåŠ¡å™¨ï¼‰
2. **ç½‘ç»œæš‚æ—¶ä¸­æ–­**
3. **é…é¢é™åˆ¶**ï¼ˆAPI rate limitï¼‰
4. **æ•°æ®æ ¼å¼å˜åŒ–**ï¼ˆRSSæºç»“æ„æ”¹å˜ï¼‰

**é˜²å¾¡æ€§è®¾è®¡**ï¼š

```markdown
# HEARTBEAT.md
æ¯30åˆ†é’Ÿæ£€æŸ¥é‚®ä»¶ï¼š

1. è¯»å– memory/email-state.jsonï¼š
   - last_check: ä¸Šæ¬¡æˆåŠŸæ£€æŸ¥çš„æ—¶é—´
   - consecutive_failures: è¿ç»­å¤±è´¥æ¬¡æ•°

2. å°è¯•æ£€æŸ¥é‚®ä»¶ï¼ˆè®¾ç½®30ç§’è¶…æ—¶ï¼‰ï¼š
   - æˆåŠŸ â†’ æ›´æ–° last_checkï¼Œé‡ç½® consecutive_failures = 0
   - å¤±è´¥ â†’ consecutive_failures += 1
   
3. å¤±è´¥å¤„ç†ï¼š
   - failures = 1-2 â†’ é™é»˜ï¼ˆå¯èƒ½æ˜¯ä¸´æ—¶ç½‘ç»œé—®é¢˜ï¼‰
   - failures = 3 â†’ å‘é€é€šçŸ¥ï¼š"é‚®ä»¶æ£€æŸ¥è¿ç»­å¤±è´¥3æ¬¡ï¼Œè¯·æ£€æŸ¥ç½‘ç»œ"
   - failures > 6 â†’ æš‚åœé‚®ä»¶æ£€æŸ¥ï¼Œå‘é€å‘Šè­¦ï¼š"é‚®ä»¶ç³»ç»Ÿå¯èƒ½å‡ºé—®é¢˜äº†"

4. æ¢å¤é€»è¾‘ï¼š
   - å¦‚æœ failures > 0 ä¸”è·ç¦»ä¸Šæ¬¡æˆåŠŸ > 6å°æ—¶ï¼š
     - å°è¯•ä½¿ç”¨å¤‡ç”¨æ–¹æ³•ï¼ˆå¦‚ï¼šæ”¹ç”¨Webç•Œé¢æŠ“å–ï¼‰
```

**Cronä»»åŠ¡çš„å¤±è´¥å¤„ç†**ï¼š
```yaml
# cron.yaml
- name: daily-backup
  schedule: "0 3 * * *"
  retries: 3
  retry_delay: 300  # 5åˆ†é’Ÿåé‡è¯•
  on_failure: |
    # å¤‡ä»½å¤±è´¥åçš„æ“ä½œ
    send_telegram "âš ï¸ å¤‡ä»½å¤±è´¥ï¼å·²å°è¯•3æ¬¡ã€‚"
    log_to_file "/var/log/backup-failures.log"
  timeout: 3600  # 1å°æ—¶è¶…æ—¶
```

> ğŸ”§ **é‡åˆ°é”™è¯¯ï¼Ÿ**
> 
> Heartbeatä»»åŠ¡ä¸€ç›´å¤±è´¥ï¼ŸæŠŠæ—¥å¿—ç»™AIï¼š
> 
> "æˆ‘çš„Heartbeatä»»åŠ¡æŠ¥é”™ï¼š[ç²˜è´´é”™è¯¯ä¿¡æ¯å’Œæ—¥å¿—]ã€‚è¿™ä¸ªä»»åŠ¡åº”è¯¥æ¯30åˆ†é’Ÿæ£€æŸ¥é‚®ä»¶ï¼Œä½†ç°åœ¨ä¸€ç›´è¶…æ—¶ã€‚å¦‚ä½•è°ƒè¯•ï¼Ÿ"

### 6.2.4 è§‚æµ‹æ€§ï¼šçŸ¥é“Agentåœ¨åšä»€ä¹ˆ

æŒç»­è¿è¡Œçš„Agentå¦‚æœå˜æˆ"é»‘ç›’"ï¼Œä½ ä¼šå¤±å»ä¿¡ä»»ã€‚

**æœ€å°æ—¥å¿—ç³»ç»Ÿ**ï¼š
```bash
# memory/logs/
â”œâ”€â”€ heartbeat-2024-02-20.log      # ä»Šå¤©çš„Heartbeatæ—¥å¿—
â”œâ”€â”€ cron-morning-2024-02-20.log   # ä»Šå¤©çš„æ™¨æŠ¥Cronæ—¥å¿—
â””â”€â”€ cron-backup-2024-02-20.log    # ä»Šå¤©çš„å¤‡ä»½Cronæ—¥å¿—
```

**Heartbeatæ—¥å¿—æ ¼å¼**ï¼ˆç®€æ´ä½†æœ‰ç”¨ï¼‰ï¼š
```
2024-02-20 08:15:32 | CHECK | email=0_new, calendar=1_upcoming, server=ok
2024-02-20 08:45:28 | CHECK | email=3_new(2_spam,1_normal), calendar=0, server=ok
2024-02-20 09:15:41 | ACTION | Sent reminder: "Meeting in 1h: Design Review"
2024-02-20 09:45:33 | CHECK | email=0_new, calendar=0, server=ok
2024-02-20 10:15:29 | CHECK | email=1_urgent!, calendar=0, server=ok
2024-02-20 10:15:30 | ACTION | Notified user: "Urgent email from boss@company.com"
```

**Dashboardè®¾è®¡**ï¼ˆå¯é€‰ï¼Œç”¨Cronç”Ÿæˆï¼‰ï¼š
```yaml
# cron.yaml
- name: daily-dashboard
  schedule: "0 */6 * * *"  # æ¯6å°æ—¶æ›´æ–°ä¸€æ¬¡
  command: |
    ç”Ÿæˆ dashboard.mdï¼š
    - ä»Šå¤©Heartbeatæ‰§è¡Œäº†å¤šå°‘æ¬¡
    - ä»Šå¤©å‘é€äº†å¤šå°‘æ¬¡é€šçŸ¥
    - ä»Šå¤©Cronä»»åŠ¡æˆåŠŸ/å¤±è´¥æ¬¡æ•°
    - å½“å‰çŠ¶æ€æ–‡ä»¶æ‘˜è¦
```

ç”Ÿæˆçš„ `dashboard.md`ï¼š
```markdown
# Agent Dashboard - 2024-02-20 18:00

## HeartbeatçŠ¶æ€
- âœ… è¿è¡Œæ­£å¸¸
- æ‰§è¡Œæ¬¡æ•°ï¼š36æ¬¡
- ä¸»åŠ¨é€šçŸ¥ï¼š5æ¬¡
- æœ€åæ£€æŸ¥ï¼š18:00
- ä¸‹æ¬¡æ£€æŸ¥ï¼š~18:30

## ä»Šæ—¥Cronä»»åŠ¡
- âœ… morning-briefing (08:00) - æˆåŠŸ
- âœ… cleanup (12:00) - æˆåŠŸ
- â³ backup (03:00æ˜å¤©) - ç­‰å¾…ä¸­

## é‡è¦æŒ‡æ ‡
- é‚®ä»¶ï¼šå·²æ£€æŸ¥ï¼Œ15å°æ–°é‚®ä»¶ï¼ˆ2å°é‡è¦ï¼‰
- æ—¥å†ï¼šä»Šå¤©3ä¸ªä¼šè®®ï¼Œå…¨éƒ¨å·²æé†’
- æœåŠ¡å™¨ï¼šå¥åº·ï¼ŒCPU 35%, ç£ç›˜ 67%

## å¼‚å¸¸
- æ— 
```

---

## ğŸ¯ 6.3 å®æˆ˜ï¼šæ„å»ºä½ çš„"æ™¨ä¼šç³»ç»Ÿ"

ç°åœ¨æˆ‘ä»¬åŠ¨æ‰‹æ„å»ºä¸€ä¸ªå®Œæ•´çš„**Morning Briefingç³»ç»Ÿ**â€”â€”æ¯å¤©æ—©ä¸Šè‡ªåŠ¨æ±‡æ€»ä½ éœ€è¦çš„æ‰€æœ‰ä¿¡æ¯ã€‚

### 6.3.1 éœ€æ±‚å®šä¹‰ï¼šä½ çš„æ™¨æŠ¥åŒ…å«ä»€ä¹ˆï¼Ÿ

åœ¨å¼€å§‹ç¼–ç ä¹‹å‰ï¼Œå…ˆæ˜ç¡®ä½ **çœŸæ­£éœ€è¦**çš„ä¿¡æ¯ã€‚

**ç¤ºä¾‹éœ€æ±‚æ¸…å•**ï¼š
```markdown
# æˆ‘çš„ç†æƒ³æ™¨æŠ¥

## å¿…é¡»æœ‰ï¼ˆæ¯å¤©ï¼‰ï¼š
1. ä»Šå¤©çš„å¤©æ°”ï¼ˆæ¸©åº¦ã€é™é›¨æ¦‚ç‡ã€ç©ºæ°”è´¨é‡ï¼‰
2. ä»Šå¤©çš„æ—¥å†äº‹ä»¶ï¼ˆæ—¶é—´ã€æ ‡é¢˜ã€åœ°ç‚¹ï¼‰
3. æ˜¨æ™šæ”¶åˆ°çš„é‡è¦é‚®ä»¶ï¼ˆéåƒåœ¾é‚®ä»¶ï¼ŒæŒ‰é‡è¦æ€§æ’åºï¼‰

## å¦‚æœç›¸å…³ï¼ˆæ¡ä»¶æ˜¾ç¤ºï¼‰ï¼š
4. å¦‚æœä»Šå¤©æœ‰åŒ…è£¹é€è¾¾ â†’ æ˜¾ç¤ºå¿«é€’ä¿¡æ¯
5. å¦‚æœæ˜å¤©æœ‰èˆªç­/ç«è½¦ â†’ æ˜¾ç¤ºè¡Œç¨‹æé†’
6. å¦‚æœä»Šå¤©æ˜¯å‘¨ä¸€ â†’ æ˜¾ç¤ºä¸Šå‘¨çš„GitHubæ´»åŠ¨æ€»ç»“
7. å¦‚æœä»Šå¤©æœ‰äººç”Ÿæ—¥ â†’ æ˜¾ç¤ºç”Ÿæ—¥æé†’

## å¯é€‰ï¼ˆæ¯å‘¨å‡ æ¬¡ï¼‰ï¼š
8. æ¯å‘¨ä¸€ï¼šæœ¬å‘¨çš„é‡è¦Deadline
9. æ¯å‘¨äº”ï¼šå‘¨æœ«å¤©æ°”é¢„æŠ¥
10. æ¯æœˆ1å·ï¼šä¸Šä¸ªæœˆçš„è´¢åŠ¡æ‘˜è¦ï¼ˆå¦‚æœæœ‰è®°è´¦ä¹ æƒ¯ï¼‰
```

**å…³é”®è®¾è®¡åŸåˆ™**ï¼š
- âœ… **Signal > Noise**ï¼šåªæ˜¾ç¤ºä½ ä¼šé‡‡å–è¡ŒåŠ¨çš„ä¿¡æ¯
- âœ… **Context-aware**ï¼šæ ¹æ®ä»Šå¤©æ˜¯å‘¨å‡ ã€å­£èŠ‚ã€å½“å‰é¡¹ç›®åŠ¨æ€è°ƒæ•´
- âŒ **é¿å…å›ºå®šæ¨¡æ¿**ï¼šä¸è¦æ¯å¤©éƒ½æ˜¾ç¤º"ä»Šå¤©æ²¡æœ‰åŒ…è£¹"è¿™ç§åºŸè¯

> ğŸ’¡ **AIè¾…åŠ©æç¤º**
> 
> ä¸çŸ¥é“ä»å“ªäº›æ•°æ®æºè·å–ä¿¡æ¯ï¼Ÿé—®AIï¼š
> - "å¦‚ä½•ç”¨APIè·å–å¤©æ°”ä¿¡æ¯ï¼Ÿæœ‰å“ªäº›å…è´¹çš„å¤©æ°”APIï¼Ÿ"
> - "å¦‚ä½•è¯»å–Google Calendarçš„ä»Šæ—¥äº‹ä»¶ï¼Ÿ"
> - "å¦‚ä½•é€šè¿‡IMAPæ£€æŸ¥Gmailä¸­çš„æœªè¯»é‚®ä»¶ï¼Ÿ"

### 6.3.2 æ¶æ„è®¾è®¡ï¼šCronè¿˜æ˜¯Heartbeatï¼Ÿ

**æˆ‘ä»¬çš„é€‰æ‹©ï¼šæ··åˆæ¨¡å¼**

**æ–¹æ¡ˆ**ï¼š
- **Cronä»»åŠ¡**ï¼ˆæ¯å¤©8ç‚¹æ•´ï¼‰ï¼šæ‰§è¡Œä¸»è¦çš„æ•°æ®æ”¶é›†å’Œæ ¼å¼åŒ–
- **Heartbeat**ï¼ˆ7:45-8:15çª—å£ï¼‰ï¼šæ£€æµ‹æ˜¯å¦éœ€è¦æ ¹æ®æ˜¨æ™šå¯¹è¯è°ƒæ•´å†…å®¹

**ä¸ºä»€ä¹ˆæ··åˆï¼Ÿ**
1. Cronä¿è¯8ç‚¹å‡†æ—¶ï¼ˆå³ä½¿ä¸»Agenté‡å¯äº†ï¼‰
2. Heartbeatå¯ä»¥åˆ©ç”¨å¯¹è¯ä¸Šä¸‹æ–‡ï¼ˆå¦‚ï¼š"æ˜å¤©è®°å¾—æé†’æˆ‘å¸¦ä¼"ï¼‰
3. æˆæœ¬æœ€ä¼˜ï¼ˆCronç”¨ä¾¿å®œæ¨¡å‹ï¼ŒHeartbeatå¤§éƒ¨åˆ†æ—¶é—´åªå›å¤OKï¼‰

#### å¯è§†åŒ–ï¼šæ™¨ä¼šç³»ç»Ÿæ•°æ®æµ

```mermaid
flowchart LR
    subgraph æ•°æ®æºå±‚
        W[å¤©æ°”API<br/>Weather.com]
        C[æ—¥å†API<br/>Google Calendar]
        E[é‚®ä»¶API<br/>Gmail IMAP]
        T[ä»»åŠ¡API<br/>Todoist/Notion]
        M[è®°å¿†æ–‡ä»¶<br/>morning-context.json]
    end
    
    subgraph Agentå¤„ç†å±‚
        A[Morning Briefing Agent<br/>Cron: æ¯å¤©8:00]
    end
    
    subgraph è¾“å‡ºå±‚
        TG[Telegramé€šçŸ¥]
        LOG[æ—¥å¿—è®°å½•<br/>briefing-YYYY-MM-DD.log]
    end
    
    W -->|æ¸©åº¦/é™é›¨| A
    C -->|ä»Šæ—¥äº‹ä»¶| A
    E -->|æœªè¯»é‚®ä»¶| A
    T -->|ä»Šæ—¥ä»»åŠ¡| A
    M -->|ç‰¹åˆ«æé†’| A
    
    A -->|æ ¼å¼åŒ–æŠ¥å‘Š| TG
    A -->|æ‰§è¡Œè®°å½•| LOG
    
    A -.->|æ›´æ–°çŠ¶æ€| M
    
    style W fill:#e3f2fd,stroke:#333
    style C fill:#e3f2fd,stroke:#333
    style E fill:#e3f2fd,stroke:#333
    style T fill:#e3f2fd,stroke:#333
    style M fill:#fff9c4,stroke:#333
    style A fill:#c8e6c9,stroke:#333,stroke-width:3px
    style TG fill:#f8bbd0,stroke:#333,stroke-width:2px
    style LOG fill:#e0e0e0,stroke:#333
```

**æ•°æ®æµè¯´æ˜**ï¼š
1. **å¹¶è¡Œè·å–**ï¼šAgentåŒæ—¶ä»å¤šä¸ªæ•°æ®æºæ‹‰å–ä¿¡æ¯ï¼ˆ5-10ç§’ï¼‰
2. **æ™ºèƒ½èšåˆ**ï¼šæ ¹æ®é‡è¦æ€§å’Œç›¸å…³æ€§ç­›é€‰å’Œæ’åº
3. **ä¸Šä¸‹æ–‡å¢å¼º**ï¼šè¯»å–ç”¨æˆ·çš„ç‰¹åˆ«æé†’ï¼ŒåŠ¨æ€è°ƒæ•´å†…å®¹
4. **å¤šæ¸ é“è¾“å‡º**ï¼šå‘é€åˆ°Telegramï¼ˆå³æ—¶ï¼‰+ è®°å½•æ—¥å¿—ï¼ˆå½’æ¡£ï¼‰
5. **çŠ¶æ€æ›´æ–°**ï¼šæ›´æ–°æ‰§è¡ŒçŠ¶æ€ï¼Œé˜²æ­¢é‡å¤å‘é€

### 6.3.3 å®ç°æ­¥éª¤

#### æ­¥éª¤1ï¼šåˆ›å»ºCroné…ç½®

```yaml
# ~/.openclaw/cron.yaml
jobs:
  - name: morning-briefing
    schedule: "0 8 * * *"  # æ¯å¤©8ç‚¹æ•´
    timezone: "Asia/Tokyo"
    model: "gpt-4o-mini"  # ä½¿ç”¨ä¾¿å®œæ¨¡å‹
    timeout: 300  # 5åˆ†é’Ÿè¶…æ—¶
    
    prompt: |
      ä½ æ˜¯Morning Briefing Agentã€‚ç°åœ¨æ˜¯æ—©ä¸Š8ç‚¹ï¼Œç”Ÿæˆä»Šå¤©çš„æ™¨æŠ¥ã€‚
      
      # æ•°æ®æ”¶é›†
      1. è°ƒç”¨ weather_api è·å–ä¸œäº¬ä»Šå¤©çš„å¤©æ°”
      2. è°ƒç”¨ calendar_api è·å–ä»Šå¤©çš„æ—¥å†äº‹ä»¶ï¼ˆ0:00-23:59ï¼‰
      3. è°ƒç”¨ email_api è·å–æ˜¨æ™š8pmä¹‹åçš„æœªè¯»é‚®ä»¶ï¼ˆæ’é™¤åƒåœ¾é‚®ä»¶ï¼‰
      4. è¯»å– memory/morning-context.json æŸ¥çœ‹æ˜¯å¦æœ‰ç‰¹æ®Šæé†’
      
      # æ ¼å¼åŒ–è¾“å‡º
      ç”Ÿæˆç»“æ„åŒ–çš„æ™¨æŠ¥ï¼ˆMarkdownæ ¼å¼ï¼‰ï¼š
      
      ## ğŸŒ¤ ä»Šæ—¥å¤©æ°”
      [æ¸©åº¦èŒƒå›´ã€é™é›¨æ¦‚ç‡ã€å»ºè®®ï¼ˆæ˜¯å¦å¸¦ä¼ï¼‰]
      
      ## ğŸ“… ä»Šæ—¥æ—¥ç¨‹ï¼ˆå¦‚æœæœ‰ï¼‰
      [æŒ‰æ—¶é—´æ’åºçš„äº‹ä»¶åˆ—è¡¨ï¼Œæ¯ä¸ªäº‹ä»¶æ˜¾ç¤ºï¼šæ—¶é—´ã€æ ‡é¢˜ã€åœ°ç‚¹]
      
      ## ğŸ“§ é‡è¦é‚®ä»¶ï¼ˆå¦‚æœæœ‰ï¼‰
      [æœ€å¤šæ˜¾ç¤º5å°ï¼ŒæŒ‰é‡è¦æ€§æ’åºï¼šå‘ä»¶äººã€ä¸»é¢˜ã€ç®€çŸ­æ‘˜è¦]
      
      ## âš¡ï¸ ç‰¹åˆ«æé†’ï¼ˆå¦‚æœæœ‰ï¼‰
      [ä» morning-context.json è¯»å–çš„ç”¨æˆ·è‡ªå®šä¹‰æé†’]
      
      ## ğŸ’¡ ä»Šæ—¥å»ºè®®
      [æ ¹æ®å¤©æ°”å’Œæ—¥ç¨‹ç»™å‡º1-2æ¡è¡ŒåŠ¨å»ºè®®]
      
      # å‘é€
      å°†æ™¨æŠ¥å‘é€åˆ° Telegram channel @my_morning_briefing
      
      # è®°å½•
      å°†æ‰§è¡Œç»“æœå†™å…¥ memory/logs/briefing-YYYY-MM-DD.log
    
    on_success: |
      # æˆåŠŸåæ›´æ–°çŠ¶æ€æ–‡ä»¶
      echo '{"last_briefing": "'$(date -u +%s)'", "status": "sent"}' > memory/briefing-state.json
    
    on_failure: |
      # å¤±è´¥åå‘é€å‘Šè­¦
      openclaw message send --target @my_telegram_user --text "âš ï¸ æ™¨æŠ¥ç”Ÿæˆå¤±è´¥ï¼Œè¯·æ£€æŸ¥æ—¥å¿—"
```

#### æ­¥éª¤2ï¼šåˆ›å»ºHeartbeatå¢å¼º

```markdown
# HEARTBEAT.md
æ¯30åˆ†é’Ÿæ£€æŸ¥ï¼ˆ7:00-9:00çª—å£ç‰¹åˆ«å…³æ³¨ï¼‰ï¼š

## æ™¨æŠ¥å¢å¼ºé€»è¾‘
å¦‚æœå½“å‰æ—¶é—´åœ¨ 7:45-8:15 ä¹‹é—´ï¼š
1. æ£€æŸ¥ memory/briefing-state.json
2. å¦‚æœä»Šå¤©çš„æ™¨æŠ¥è¿˜æ²¡å‘é€ï¼š
   - æ£€æŸ¥æœ€è¿‘24å°æ—¶çš„å¯¹è¯ï¼ˆæœç´¢å…³é”®è¯ï¼š"æé†’"ã€"åˆ«å¿˜äº†"ã€"æ˜å¤©"ï¼‰
   - å¦‚æœå‘ç°ç‰¹æ®Šæé†’ï¼Œå†™å…¥ memory/morning-context.jsonï¼š
     ```json
     {
       "date": "2024-02-20",
       "special_reminders": [
         "ç”¨æˆ·æ˜¨æ™šè¯´è¦æ—©èµ·å»æœºåœºï¼Œæé†’æ£€æŸ¥èˆªç­æ—¶é—´",
         "ä»Šå¤©è¦å¸¦å…¬å¸é—¨ç¦å¡ï¼ˆæ˜¨å¤©å¿˜åœ¨å®¶é‡Œäº†ï¼‰"
       ]
     }
     ```
   - Cronä»»åŠ¡ä¼šåœ¨8ç‚¹è¯»å–è¿™ä¸ªæ–‡ä»¶å¹¶åŒ…å«åœ¨æ™¨æŠ¥ä¸­

3. å¦‚æœæ™¨æŠ¥å·²å‘é€ï¼ˆæ£€æŸ¥ briefing-state.jsonï¼‰ï¼š
   - è¯»å–æ™¨æŠ¥æ—¥å¿—ï¼Œæ£€æŸ¥æ˜¯å¦æœ‰å¤±è´¥
   - å¦‚æœå‘é€æˆåŠŸ â†’ HEARTBEAT_OK
   - å¦‚æœå‘é€å¤±è´¥ â†’ æ‰‹åŠ¨é‡è¯•ä¸€æ¬¡

## å…¶ä»–æ—¶é—´
æ­£å¸¸çš„Heartbeaté€»è¾‘ï¼ˆé‚®ä»¶ã€æ—¥å†ã€æœåŠ¡å™¨æ£€æŸ¥ï¼‰...
```

#### æ­¥éª¤3ï¼šå‡†å¤‡æ•°æ®æºé›†æˆ

**å¤©æ°”APIé›†æˆ**ï¼ˆç¤ºä¾‹ï¼šOpenWeatherMapï¼‰
```javascript
// skills/weather/get-weather.js
async function getWeather(city) {
  const API_KEY = process.env.OPENWEATHER_API_KEY;  // ä»ç¯å¢ƒå˜é‡è¯»å–
  const url = `https://api.openweathermap.org/data/2.5/weather?q=${city}&appid=${API_KEY}&units=metric&lang=zh_cn`;
  
  const response = await fetch(url);
  const data = await response.json();
  
  return {
    temp: Math.round(data.main.temp),
    feels_like: Math.round(data.main.feels_like),
    description: data.weather[0].description,
    humidity: data.main.humidity,
    rain_probability: data.rain ? data.rain['1h'] : 0
  };
}
```

**Google Calendaré›†æˆ**ï¼ˆä½¿ç”¨OAuthï¼‰
```python
# skills/calendar/get-today-events.py
from google.oauth2.credentials import Credentials
from googleapiclient.discovery import build
import datetime

def get_today_events():
    creds = Credentials.from_authorized_user_file('token.json', SCOPES)
    service = build('calendar', 'v3', credentials=creds)
    
    # è·å–ä»Šå¤©0ç‚¹åˆ°æ˜å¤©0ç‚¹çš„äº‹ä»¶
    now = datetime.datetime.now().replace(hour=0, minute=0, second=0)
    tomorrow = now + datetime.timedelta(days=1)
    
    events_result = service.events().list(
        calendarId='primary',
        timeMin=now.isoformat() + 'Z',
        timeMax=tomorrow.isoformat() + 'Z',
        singleEvents=True,
        orderBy='startTime'
    ).execute()
    
    return events_result.get('items', [])
```

**Gmailé›†æˆ**ï¼ˆIMAPæ–¹å¼ï¼Œé¿å…OAuthå¤æ‚æ€§ï¼‰
```python
# skills/email/check-important.py
import imaplib
import email
from email.header import decode_header

def check_important_emails(since_hours=12):
    mail = imaplib.IMAP4_SSL('imap.gmail.com')
    mail.login(EMAIL, PASSWORD)  # ä½¿ç”¨åº”ç”¨ä¸“ç”¨å¯†ç 
    mail.select('inbox')
    
    # æœç´¢æ˜¨æ™šä»¥æ¥çš„æœªè¯»é‚®ä»¶
    status, messages = mail.search(None, 'UNSEEN SINCE yesterday')
    
    emails = []
    for num in messages[0].split()[-5:]:  # æœ€å¤šå–5å°
        _, msg_data = mail.fetch(num, '(RFC822)')
        msg = email.message_from_bytes(msg_data[0][1])
        
        # è§£ææ ‡é¢˜å’Œå‘ä»¶äºº
        subject = decode_header(msg['Subject'])[0][0]
        from_ = msg.get('From')
        
        # ç®€å•çš„é‡è¦æ€§è¯„åˆ†
        importance = calculate_importance(subject, from_)
        
        emails.append({
            'from': from_,
            'subject': subject,
            'importance': importance
        })
    
    return sorted(emails, key=lambda x: x['importance'], reverse=True)
```

> ğŸ’¡ **AIè¾…åŠ©æç¤º**
> 
> åœ¨é›†æˆAPIæ—¶é‡åˆ°é—®é¢˜ï¼Ÿé—®AIï¼š
> - "å¦‚ä½•è·å–OpenWeatherMapçš„å…è´¹API Keyï¼Ÿ"
> - "Google Calendar APIçš„OAuthè®¤è¯æµç¨‹æ˜¯ä»€ä¹ˆï¼Ÿ"
> - "å¦‚ä½•åœ¨Gmailä¸­ç”Ÿæˆåº”ç”¨ä¸“ç”¨å¯†ç ï¼ˆApp Passwordï¼‰ï¼Ÿ"
> - "Python IMAPåº“å¦‚ä½•æœç´¢ç‰¹å®šæ—¥æœŸä¹‹åçš„é‚®ä»¶ï¼Ÿ"

#### æ­¥éª¤4ï¼šæµ‹è¯•å’Œè¿­ä»£

**ç¬¬ä¸€æ¬¡æµ‹è¯•**ï¼ˆæ‰‹åŠ¨è§¦å‘ï¼‰ï¼š
```bash
# ä¸ç­‰åˆ°æ˜å¤©8ç‚¹ï¼Œç°åœ¨å°±æµ‹è¯•
openclaw run --agent morning-bot --file ~/.openclaw/cron.yaml --job morning-briefing --now
```

**æ£€æŸ¥è¾“å‡º**ï¼š
```bash
# æŸ¥çœ‹æ—¥å¿—
cat memory/logs/briefing-2024-02-20.log

# æ£€æŸ¥Telegramæ˜¯å¦æ”¶åˆ°æ¶ˆæ¯
# æŸ¥çœ‹çŠ¶æ€æ–‡ä»¶
cat memory/briefing-state.json
```

**å¸¸è§é—®é¢˜å’Œè°ƒè¯•**ï¼š

| é—®é¢˜ | å¯èƒ½åŸå›  | è§£å†³æ–¹æ³• |
|------|---------|---------|
| å¤©æ°”æ•°æ®ä¸ºç©º | API Keyæ— æ•ˆ | æ£€æŸ¥ç¯å¢ƒå˜é‡ï¼Œé‡æ–°ç”³è¯·Key |
| æ—¥å†æ²¡æœ‰äº‹ä»¶ | OAuth tokenè¿‡æœŸ | é‡æ–°æˆæƒï¼Œåˆ·æ–°token |
| é‚®ä»¶æ£€æŸ¥è¶…æ—¶ | ç½‘ç»œé—®é¢˜æˆ–å¯†ç é”™è¯¯ | æ£€æŸ¥ç½‘ç»œï¼Œç¡®è®¤å¯†ç æ­£ç¡® |
| Telegramå‘é€å¤±è´¥ | Bot tokenæ— æ•ˆ | ç¡®è®¤Bot tokenå’ŒChat ID |

> ğŸ”§ **é‡åˆ°é”™è¯¯ï¼Ÿ**
> 
> æµ‹è¯•å¤±è´¥ï¼ŸæŠŠå®Œæ•´æ—¥å¿—ç»™AIï¼š
> 
> "æˆ‘åœ¨æµ‹è¯•Morning Briefingæ—¶é‡åˆ°é”™è¯¯ï¼š
> [ç²˜è´´ briefing-YYYY-MM-DD.log çš„å†…å®¹]
> 
> è¿™æ˜¯æˆ‘çš„é…ç½®ï¼š
> [ç²˜è´´ç›¸å…³é…ç½®]
> 
> å¦‚ä½•è°ƒè¯•ï¼Ÿ"

### 6.3.4 æŒç»­ä¼˜åŒ–ï¼šä»åé¦ˆåˆ°æ”¹è¿›

**ç¬¬ä¸€å‘¨**ï¼šåŸºç¡€ç‰ˆæœ¬
```markdown
## ğŸŒ¤ ä»Šæ—¥å¤©æ°”
ä¸œäº¬ï¼Œæ™´ï¼Œ12-18Â°Cï¼Œé™é›¨æ¦‚ç‡10%

## ğŸ“… ä»Šæ—¥æ—¥ç¨‹
- 10:00 å›¢é˜Ÿä¼šè®®ï¼ˆä¼šè®®å®¤Aï¼‰
- 14:00 å®¢æˆ·æ¼”ç¤ºï¼ˆçº¿ä¸Šï¼‰
- 18:30 å¥èº«æˆ¿

## ğŸ“§ é‡è¦é‚®ä»¶
- [è€æ¿] å…³äºQ2è§„åˆ’çš„è®¨è®º
- [HR] å¹´åº¦ä½“æ£€é€šçŸ¥
```

**ç¬¬äºŒå‘¨**ï¼šæ ¹æ®ç”¨æˆ·åé¦ˆæ”¹è¿›
```markdown
## ğŸŒ¤ ä»Šæ—¥å¤©æ°”
ä¸œäº¬ï¼Œæ™´è½¬å¤šäº‘ï¼Œ12-18Â°Cï¼Œä¸‹åˆå¯èƒ½æœ‰å°é›¨
ğŸ’¡ å»ºè®®ï¼šä¸‹åˆå‡ºé—¨å¸¦ä¼

## ğŸ“… ä»Šæ—¥æ—¥ç¨‹ï¼ˆ3ä¸ªäº‹ä»¶ï¼‰
ğŸ”´ 10:00-11:00 å›¢é˜Ÿå‘¨ä¼šï¼ˆä¼šè®®å®¤Aï¼‰
   è·ç¦»ç°åœ¨è¿˜æœ‰2å°æ—¶
   
ğŸŸ¡ 14:00-15:00 å®¢æˆ·æ¼”ç¤ºï¼ˆZoomï¼‰
   [ç‚¹å‡»åŠ å…¥ä¼šè®®](https://zoom.us/j/xxx)
   
ğŸŸ¢ 18:30 å¥èº«æˆ¿
   ä»Šå¤©æ˜¯ç»ƒè…¿æ—¥ğŸ’ª

## ğŸ“§ é‡è¦é‚®ä»¶ï¼ˆ2å°ï¼Œå·²è¿‡æ»¤3å°ä¿ƒé”€é‚®ä»¶ï¼‰
ğŸ“Œ [è€æ¿ | æ˜¨æ™š22:15] å…³äºQ2è§„åˆ’çš„è®¨è®º
   â†’ éœ€è¦ä½ åœ¨å‘¨ä¸‰å‰å‡†å¤‡PPT
   
ğŸ“„ [HR | ä»Šæ™¨07:30] å¹´åº¦ä½“æ£€é€šçŸ¥
   â†’ ä½“æ£€æ—¥æœŸï¼š3æœˆ15æ—¥ï¼Œéœ€æå‰é¢„çº¦

## âš¡ï¸ ç‰¹åˆ«æé†’
âš ï¸ ä½ æ˜¨æ™šè¯´ä»Šå¤©è¦å¸¦å…¬å¸é—¨ç¦å¡ï¼ˆä¸Šæ¬¡å¿˜åœ¨å®¶é‡Œäº†ï¼‰
```

**ç¬¬ä¸‰å‘¨**ï¼šæ™ºèƒ½åŒ–å¢å¼º
```markdown
## ğŸŒ¤ ä»Šæ—¥å¤©æ°” + ç©¿è¡£å»ºè®®
ä¸œäº¬ï¼Œæ™´è½¬å¤šäº‘ï¼Œ12-18Â°Cï¼Œä¸‹åˆ3ç‚¹åæœ‰60%æ¦‚ç‡å°é›¨
ğŸ§¥ å»ºè®®ï¼šè–„å¤–å¥— + ä¼
ğŸš« ä¸å»ºè®®ï¼šçŸ­è¢–ï¼ˆæ—©æ™šå‡‰ï¼‰

## ğŸ“… ä»Šæ—¥æ—¥ç¨‹ï¼ˆ3ä¸ªäº‹ä»¶ï¼Œæ¯”å¹³æ—¶å°‘ï¼‰
ã€ä¸Šåˆã€‘
10:00-11:00 å›¢é˜Ÿå‘¨ä¼šï¼ˆä¼šè®®å®¤Aï¼‰
   ğŸ¯ é‡ç‚¹è®®é¢˜ï¼šQ2 OKR Review
   ğŸ“ ä¸Šæ¬¡ä¼šè®®è®°å½•ï¼š[é“¾æ¥]

ã€ä¸‹åˆã€‘
14:00-15:00 å®¢æˆ·æ¼”ç¤ºï¼ˆZoomï¼‰âš ï¸ é‡è¦
   ğŸ‘¤ å‚ä¼šäººï¼šå®¢æˆ·CTO + 2åå·¥ç¨‹å¸ˆ
   ğŸ“Š æ¼”ç¤ºææ–™å·²å‡†å¤‡ï¼šdemo-v3.pptx
   ğŸ”— [ç‚¹å‡»åŠ å…¥ä¼šè®®](https://zoom.us/j/xxx)
   ğŸ’¡ æå‰15åˆ†é’Ÿæµ‹è¯•è®¾å¤‡

ã€æ™šä¸Šã€‘
18:30 å¥èº«æˆ¿ï¼ˆç»ƒè…¿æ—¥ï¼‰
   ä¸Šæ¬¡ï¼šæ·±è¹²80kgÃ—8ï¼Œä»Šå¤©è¯•è¯•85kgï¼Ÿ

## ğŸ“§ é‡è¦é‚®ä»¶ï¼ˆ2å°ï¼Œä¼˜å…ˆçº§æ’åºï¼‰
ğŸ”´ HIGH | [è€æ¿ | æ˜¨æ™š22:15] å…³äºQ2è§„åˆ’çš„è®¨è®º
   éœ€è¦ï¼šå‘¨ä¸‰å‰å‡†å¤‡PPT
   ğŸ“ é™„ä»¶ï¼šQ2-planning-draft.pdf
   ğŸ’¬ å»ºè®®ï¼šä»Šå¤©å®‰æ’1å°æ—¶å¤„ç†è¿™ä¸ª
   
ğŸŸ¡ NORMAL | [HR | ä»Šæ™¨07:30] å¹´åº¦ä½“æ£€é€šçŸ¥
   è¡ŒåŠ¨ï¼š3æœˆ15æ—¥ä½“æ£€ï¼Œè®°å¾—æå‰é¢„çº¦
   ğŸ“… å·²æ·»åŠ åˆ°æ—¥å†æé†’

## âš¡ï¸ ç‰¹åˆ«æé†’
âš ï¸ åˆ«å¿˜äº†é—¨ç¦å¡ï¼ï¼ˆä½ æ˜¨å¤©è¯´ä»Šå¤©ä¸€å®šè¦è®°å¾—å¸¦ï¼‰

## ğŸ’¡ ä»Šæ—¥å»ºè®®
1. å®¢æˆ·æ¼”ç¤ºå¾ˆé‡è¦ï¼Œå»ºè®®ä¸Šåˆé¢„ç•™1å°æ—¶å†æ£€æŸ¥ä¸€éPPT
2. ä¸‹åˆ3ç‚¹åå¯èƒ½ä¸‹é›¨ï¼Œå¦‚æœå»å¥èº«æˆ¿å»ºè®®6ç‚¹å‰å‡ºå‘
3. ä»Šå¤©æ—¥ç¨‹è¾ƒè½»ï¼Œå¯ä»¥é›†ä¸­å¤„ç†Q2è§„åˆ’æ–‡æ¡£

---
ç”Ÿæˆæ—¶é—´ï¼š2024-02-20 08:00:15
æ•°æ®æ¥æºï¼šGoogle Calendar, Gmail, OpenWeather
```

**ä¼˜åŒ–æŠ€å·§æ€»ç»“**ï¼š

| ä¼˜åŒ–ç‚¹ | å®ç°æ–¹å¼ | æ•ˆæœ |
|-------|---------|------|
| ä¼˜å…ˆçº§æ ‡è¯† | ç”¨é¢œè‰²emojiï¼ˆğŸ”´ğŸŸ¡ğŸŸ¢ï¼‰æ ‡è®°é‡è¦æ€§ | ä¸€çœ¼çœ‹å‡ºé‡ç‚¹ |
| å¯æ“ä½œå»ºè®® | ä¸åªæ˜¾ç¤ºä¿¡æ¯ï¼Œè¿˜ç»™å‡ºè¡ŒåŠ¨å»ºè®® | ä»"çŸ¥é“"åˆ°"è¡ŒåŠ¨" |
| æ—¶é—´æ„ŸçŸ¥ | "è·ç¦»ç°åœ¨è¿˜æœ‰2å°æ—¶" | å¢å¼ºç´§è¿«æ„Ÿ |
| ä¸Šä¸‹æ–‡è¿æ¥ | é“¾æ¥åˆ°ä¸Šæ¬¡ä¼šè®®è®°å½•ã€ç›¸å…³æ–‡æ¡£ | å‡å°‘æŸ¥æ‰¾æ—¶é—´ |
| è¿‡æ»¤å™ªéŸ³ | "å·²è¿‡æ»¤3å°ä¿ƒé”€é‚®ä»¶" | è®©ç”¨æˆ·çŸ¥é“Agentåœ¨å·¥ä½œ |
| è®°å¿†å»¶ç»­ | "ä¸Šæ¬¡æ·±è¹²80kg" | ä¸ªæ€§åŒ–ï¼ŒåƒçœŸäººåŠ©ç† |

> ğŸ“š **æ·±å…¥å­¦ä¹ **
> 
> æƒ³è®©æ™¨æŠ¥æ›´æ™ºèƒ½ï¼Ÿé—®AIï¼š
> - "å¦‚ä½•ç”¨æœºå™¨å­¦ä¹ è¯„ä¼°é‚®ä»¶çš„é‡è¦æ€§ï¼Ÿ"
> - "å¦‚ä½•æ ¹æ®å†å²æ•°æ®é¢„æµ‹ä¼šè®®çš„é‡è¦ç¨‹åº¦ï¼Ÿ"
> - "å¦‚ä½•å®ç°åŸºäºå¤©æ°”çš„æ™ºèƒ½ç©¿è¡£å»ºè®®ç®—æ³•ï¼Ÿ"
> - "å¦‚ä½•è®­ç»ƒä¸€ä¸ªä¸ªæ€§åŒ–çš„æ™¨æŠ¥ä¼˜åŒ–æ¨¡å‹ï¼Ÿ"

### 6.3.5 æ‰©å±•æ¡ˆä¾‹ï¼šMulti-Agent Teamçš„æ¯æ—¥Standup

æ™¨æŠ¥ç³»ç»Ÿçš„æ¶æ„å¯ä»¥ç›´æ¥åº”ç”¨åˆ°å›¢é˜Ÿåä½œåœºæ™¯ï¼š

**åœºæ™¯**ï¼šä½ æœ‰ä¸€ä¸ª4äººAgentå›¢é˜Ÿï¼ˆç­–ç•¥ã€å¼€å‘ã€è¥é”€ã€è¿è¥ï¼‰ï¼Œæ¯å¤©æ—©ä¸Š9ç‚¹è‡ªåŠ¨å¼€"ç«™ä¼š"ã€‚

**å®ç°**ï¼š
```yaml
# cron.yaml
- name: team-standup
  schedule: "0 9 * * 1-5"  # å·¥ä½œæ—¥æ—©ä¸Š9ç‚¹
  model: "gpt-4o-mini"
  
  prompt: |
    ä½ æ˜¯Team Coordinatorã€‚ç°åœ¨å¬å¼€æ¯æ—¥ç«™ä¼šã€‚
    
    1. è®©æ¯ä¸ªAgentæ±‡æŠ¥æ˜¨å¤©çš„å·¥ä½œå’Œä»Šå¤©çš„è®¡åˆ’ï¼š
       - @strategy-agent: è¯»å– projects/strategy/STATE.yaml
       - @dev-agent: è¯»å– projects/dev/STATE.yaml å’Œ git log
       - @marketing-agent: è¯»å– projects/marketing/STATE.yaml
       - @ops-agent: è¯»å– logs/server-health.json
    
    2. è¯†åˆ« blocker å’Œä¾èµ–å…³ç³»ï¼š
       - å¦‚æœdev-agentåœ¨ç­‰strategy-agentçš„æ–‡æ¡£ â†’ æ ‡è®°ä¸ºä¾èµ–
       - å¦‚æœops-agentæŠ¥å‘ŠæœåŠ¡å™¨é—®é¢˜ â†’ æ ‡è®°ä¸ºblocker
    
    3. ç”Ÿæˆç«™ä¼šçºªè¦ï¼š
       ## Daily Standup - 2024-02-20
       
       ### Strategy Team
       - âœ… æ˜¨å¤©ï¼šå®ŒæˆQ2å¸‚åœºåˆ†ææŠ¥å‘Š
       - ğŸ¯ ä»Šå¤©ï¼šå¼€å§‹ç«å“è°ƒç ”
       - ğŸš§ Blockerï¼šæ— 
       
       ### Dev Team
       - âœ… æ˜¨å¤©ï¼šå®Œæˆç”¨æˆ·è®¤è¯æ¨¡å—ï¼ˆ3ä¸ªcommitsï¼‰
       - ğŸ¯ ä»Šå¤©ï¼šå¼€å§‹æ”¯ä»˜é›†æˆ
       - âš ï¸ ä¾èµ–ï¼šç­‰å¾…Strategyæä¾›æ”¯ä»˜æµç¨‹æ–‡æ¡£
       
       ### Marketing Team
       - âœ… æ˜¨å¤©ï¼šå‘å¸ƒ2ç¯‡åšå®¢æ–‡ç« 
       - ğŸ¯ ä»Šå¤©ï¼šå‡†å¤‡ä¸‹å‘¨çš„äº§å“å‘å¸ƒæ´»åŠ¨
       - ğŸš§ Blockerï¼šæ— 
       
       ### Ops Team
       - âœ… æ˜¨å¤©ï¼šæœåŠ¡å™¨å‡çº§å®Œæˆ
       - ğŸ¯ ä»Šå¤©ï¼šç›‘æ§æ–°ç‰ˆæœ¬ç¨³å®šæ€§
       - âš ï¸ æ³¨æ„ï¼šCPUä½¿ç”¨ç‡æ¯”å¹³æ—¶é«˜15%ï¼ŒæŒç»­è§‚å¯Ÿ
       
       ### ğŸ”´ éœ€è¦äººç±»ä»‹å…¥
       - Devç­‰å¾…Strategyæ–‡æ¡£å·²2å¤©ï¼Œå»ºè®®ä»Šå¤©ä¼˜å…ˆå¤„ç†
       - OpsæŠ¥å‘ŠCPUä½¿ç”¨ç‡å¼‚å¸¸ï¼Œå¯èƒ½éœ€è¦æ‰©å®¹
    
    4. å‘é€åˆ°Telegram Group @team_standup
    5. æ›´æ–° memory/standup-YYYY-MM-DD.md
```

**æ•ˆæœ**ï¼š
- å›¢é˜Ÿæˆå‘˜ï¼ˆäººç±»ï¼‰æ—©ä¸Šæ‰“å¼€Telegramï¼Œç«™ä¼šçºªè¦å·²ç»å‡†å¤‡å¥½
- æ¸…æ¥šçœ‹åˆ°æ¯ä¸ªAgentï¼ˆæˆ–äººç±»æˆå‘˜ï¼‰çš„è¿›å±•å’Œé˜»å¡
- éœ€è¦äººç±»å†³ç­–çš„é—®é¢˜å·²ç»è¢«è¯†åˆ«å¹¶é«˜äº®

---

## ğŸ“Œ 6.4 æœ¬ç« æ€»ç»“

### æ ¸å¿ƒè¦ç‚¹

1. **Cron vs Heartbeat**ï¼š
   - Cron = ç²¾ç¡®æ—¶é—´ã€ç‹¬ç«‹ä¼šè¯ã€å¯é¢„æµ‹
   - Heartbeat = ä¸Šä¸‹æ–‡æ„ŸçŸ¥ã€æ™ºèƒ½åˆ¤æ–­ã€æˆæœ¬ä¼˜åŒ–
   - æœ€ä½³å®è·µï¼šæ··åˆä½¿ç”¨ï¼Œå„å–æ‰€é•¿

2. **Heartbeatçš„è‰ºæœ¯**ï¼š
   - **æ²‰é»˜æ˜¯é‡‘**ï¼šå¤§éƒ¨åˆ†æ—¶å€™åº”è¯¥å›å¤ HEARTBEAT_OK
   - **çŠ¶æ€è·Ÿè¸ª**ï¼šç”¨æ–‡ä»¶è®°å½•å·²æ£€æŸ¥ã€å·²æé†’çš„äº‹é¡¹
   - **æˆæœ¬æ„è¯†**ï¼šé¿å…æ¯æ¬¡éƒ½è°ƒç”¨æ˜‚è´µçš„API
   - **ä¼˜é›…å¤±è´¥**ï¼šå¤„ç†è¶…æ—¶ã€é‡è¯•ã€é™çº§

3. **æŒä¹…åŒ–è®¾è®¡**ï¼š
   - **æ—¥å¿—ç³»ç»Ÿ**ï¼šæ¯å¤©ä¸€ä¸ªæ–‡ä»¶ï¼Œæ–¹ä¾¿è°ƒè¯•å’Œå®¡è®¡
   - **çŠ¶æ€æ–‡ä»¶**ï¼šJSON/YAMLè®°å½•Agentçš„"è®°å¿†"
   - **Dashboard**ï¼šå¯è§†åŒ–Agentçš„è¿è¡ŒçŠ¶æ€

4. **Morning Briefingæ¨¡å¼**ï¼š
   - ä»ç®€å•å¼€å§‹ï¼ˆå¤©æ°”+æ—¥å†ï¼‰ï¼Œé€æ­¥è¿­ä»£
   - æ ¹æ®ç”¨æˆ·åé¦ˆè°ƒæ•´å†…å®¹å’Œæ ¼å¼
   - ä¼˜å…ˆæ˜¾ç¤ºå¯æ“ä½œçš„ä¿¡æ¯ï¼Œè¿‡æ»¤å™ªéŸ³
   - åˆ©ç”¨ä¸Šä¸‹æ–‡è®°å¿†å®ç°ä¸ªæ€§åŒ–

### å®æˆ˜æ£€æŸ¥æ¸…å•

**åœ¨éƒ¨ç½²æŒç»­è¿è¡Œçš„Agentä¹‹å‰ï¼Œé—®è‡ªå·±**ï¼š

- [ ] Cronæ—¶é—´è¡¨è¾¾å¼æ˜¯å¦æ­£ç¡®ï¼Ÿï¼ˆç”¨ crontab.guru éªŒè¯ï¼‰
- [ ] Heartbeatæ˜¯å¦ä¼šäº§ç”Ÿå¤ªå¤šå™ªéŸ³ï¼Ÿï¼ˆæµ‹è¯•24å°æ—¶ï¼‰
- [ ] çŠ¶æ€æ–‡ä»¶çš„è·¯å¾„æ˜¯å¦æ­£ç¡®ï¼Ÿï¼ˆmemory/ä¸‹ï¼‰
- [ ] å¤±è´¥é‡è¯•é€»è¾‘æ˜¯å¦åˆç†ï¼Ÿï¼ˆä¸è¦æ— é™é‡è¯•ï¼‰
- [ ] æ—¥å¿—æ˜¯å¦è¶³å¤Ÿè¯¦ç»†ï¼Ÿï¼ˆä½†ä¸è¿‡åº¦ï¼‰
- [ ] æˆæœ¬æ˜¯å¦å¯æ§ï¼Ÿï¼ˆä¼°ç®—æœˆåº¦tokenæ¶ˆè€—ï¼‰
- [ ] æ˜¯å¦æœ‰äººç±»å®¡è®¡æœºåˆ¶ï¼Ÿï¼ˆå®šæœŸæ£€æŸ¥æ—¥å¿—ï¼‰
- [ ] å¦‚æœAgentåœæ­¢å·¥ä½œï¼Œä½ ä¼šå‘ç°å—ï¼Ÿï¼ˆè®¾ç½®å‘Šè­¦ï¼‰

### ä¸‹ä¸€æ­¥

ç°åœ¨ä½ çš„Agentå¯ä»¥**7Ã—24å°æ—¶è‡ªä¸»è¿è¡Œ**äº†ã€‚ä½†éšç€ç³»ç»Ÿå¤æ‚åº¦å¢åŠ ï¼Œä½ éœ€è¦è€ƒè™‘ï¼š

- **å¦‚ä½•ä¿æŠ¤å‡­è¯**ï¼Ÿï¼ˆç¬¬7ç« ï¼šå®‰å…¨è¾¹ç•Œä¸é£é™©ç®¡ç†ï¼‰
- **å¦‚ä½•å¤„ç†å¤šæ•°æ®æº**ï¼Ÿï¼ˆç¬¬8ç« ï¼šæ•°æ®ç®¡é“ä¸RAGï¼‰
- **å¦‚ä½•ç›‘æ§Agentçš„è¡Œä¸º**ï¼Ÿï¼ˆç¬¬14ç« ï¼šè°ƒè¯•ã€æ—¥å¿—ä¸å¯è§‚æµ‹æ€§ï¼‰

ä¸‹ä¸€ç« ï¼Œæˆ‘ä»¬å°†æ·±å…¥**å®‰å…¨è®¾è®¡**â€”â€”å­¦ä¹ å¦‚ä½•è®©Agentåœ¨æ‹¥æœ‰å¼ºå¤§èƒ½åŠ›çš„åŒæ—¶ï¼Œä¸ä¼šæˆä¸ºå®‰å…¨éšæ‚£ã€‚

---

> ğŸ’¡ **AIè¾…åŠ©æç¤º - æœ¬ç« å®è·µå»ºè®®**
> 
> å®ç°æœ¬ç« çš„Morning Briefingç³»ç»Ÿæ—¶ï¼Œé‡åˆ°ä»»ä½•é—®é¢˜éƒ½å¯ä»¥é—®AIï¼š
> 
> **é…ç½®é—®é¢˜**ï¼š
> - "è¿™ä¸ªCronè¡¨è¾¾å¼å¯¹å—ï¼š`0 8 * * 1-5`ï¼Ÿ"
> - "å¦‚ä½•åœ¨OpenClawä¸­é…ç½®å®šæ—¶ä»»åŠ¡ï¼Ÿ"
> 
> **ä»£ç é—®é¢˜**ï¼š
> - "å¦‚ä½•ç”¨Pythoné€šè¿‡IMAPæ£€æŸ¥Gmailï¼Ÿ"
> - "å¦‚ä½•ç”¨JavaScriptè°ƒç”¨OpenWeatherMap APIï¼Ÿ"
> 
> **è°ƒè¯•é—®é¢˜**ï¼š
> - "æˆ‘çš„Cronä»»åŠ¡æ²¡æœ‰æ‰§è¡Œï¼Œæ—¥å¿—æ˜¾ç¤ºï¼š[ç²˜è´´é”™è¯¯]"
> - "Heartbeatä¸€ç›´å›å¤ï¼Œå¦‚ä½•è®©å®ƒå®‰é™ï¼Ÿ"
> 
> **ä¼˜åŒ–é—®é¢˜**ï¼š
> - "å¦‚ä½•å‡å°‘APIè°ƒç”¨æ¬¡æ•°æ¥é™ä½æˆæœ¬ï¼Ÿ"
> - "å¦‚ä½•è®¾è®¡çŠ¶æ€æ–‡ä»¶æ¥é¿å…é‡å¤å¤„ç†ï¼Ÿ"
> 
> AIæ˜¯ä½ çš„å‰¯é©¾é©¶ï¼Œéšæ—¶æ±‚åŠ©ï¼Œä¸è¦å¡ä½ï¼

---

**å­—æ•°ç»Ÿè®¡**ï¼šçº¦7,200å­—

**ä¸‹ä¸€ç« é¢„å‘Š**ï¼šç¬¬7ç« ã€Šå®‰å…¨è¾¹ç•Œä¸é£é™©ç®¡ç†ã€‹â€”â€”å­¦ä¹ å¦‚ä½•è®¾è®¡é˜²æŠ¤æ ï¼Œè®©Agentåœ¨è‡ªåŠ¨åŒ–çš„åŒæ—¶ä¸ä¼šå¤±æ§ã€‚

---

## å‚è€ƒèµ„æ–™

æœ¬ç« å¼•ç”¨çš„æ¡ˆä¾‹å‡æ¥è‡ª [awesome-openclaw-usecases](https://github.com/hesamsheikh/awesome-openclaw-usecases) ç¤¾åŒºä»“åº“ï¼š

- [Custom Morning Brief](https://github.com/hesamsheikh/awesome-openclaw-usecases/blob/main/usecases/custom-morning-brief.md)
- [Self-Healing Home Server](https://github.com/hesamsheikh/awesome-openclaw-usecases/blob/main/usecases/self-healing-home-server.md)
- [Health & Symptom Tracker](https://github.com/hesamsheikh/awesome-openclaw-usecases/blob/main/usecases/health-symptom-tracker.md)
